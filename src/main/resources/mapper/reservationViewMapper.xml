<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.reservationView">
  <select id="getReservationViewList" parameterType="project.oecr.dto.ReservationDto" resultType="project.oecr.dto.ReservationDto">
    select reservation.rId, reservation.statNm, reservation.chgerId, reservation.resDate, time.startTime, time.endTime, reservation.couponNum
    from reservation
           inner join time
    where mid = #{mid} and reservation.tId = time.tId
    order by rid desc
    limit #{pageNumber}, 10
  </select>

  <select id="getTotalCount" parameterType="project.oecr.dto.ReservationDto" resultType="int">
    select count(*)
    from reservation
    where mid = #{mid}
  </select>
</mapper>